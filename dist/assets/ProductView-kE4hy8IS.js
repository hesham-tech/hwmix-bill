import{r as h,J as I,c as d,a as e,b as t,t as a,C as b,w as s,s as w,d as u,o as c,l as m,e as r,M as S,g,B as k,A as $,m as j,S as z}from"./index-CuR9-sbN.js";import{u as D}from"./useProductsData-BLhB-E08.js";import{_ as V}from"./AppButton-CREzoRf6.js";import{_ as f}from"./AppCard-CXpBKc1t.js";import{_ as R}from"./LoadingSpinner-vBlED74H.js";import"./useApi-CjhFmPue.js";const G={class:"product-view-page"},M={class:"d-flex align-center justify-space-between mb-6"},A={class:"d-flex align-center"},F={class:"text-h4 font-weight-bold"},J={key:0,class:"text-body-1 text-grey"},T={class:"d-flex gap-2 no-print"},H={key:0,class:"d-flex justify-center align-center py-12"},K={class:"font-weight-bold text-h6"},L={class:"font-weight-bold text-h6"},O={class:"text-body-1 line-height-relaxed"},Q={class:"text-h5 font-weight-bold"},U={class:"text-h5 font-weight-bold text-success"},W={class:"text-h5 font-weight-bold"},X={class:"font-weight-bold text-h6"},Y={class:"text-center"},Z={class:"pa-2 border rounded-lg bg-grey-lighten-5 mb-4 overflow-hidden"},q={key:1,class:"d-flex flex-column align-center justify-center py-12"},nt={__name:"ProductView",setup(tt){const _=j(),p=z(),{getProduct:C}=D(),l=h(null),v=h(!0),x=i=>i?new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(i):"0.00 ج.م",B=i=>!i||i===0?"error":i<10?"warning":"success",P=i=>!i||i===0?"ri-close-circle-line":i<10?"ri-error-warning-line":"ri-checkbox-circle-line",E=()=>{_.push("/products")},N=()=>{_.push(`/products/${p.params.id}/edit`)};return I(async()=>{v.value=!0;try{const i=await C(p.params.id);l.value=i.data}catch(i){console.error("Error loading product:",i),_.push("/products")}finally{v.value=!1}}),(i,o)=>{var y;return c(),d("div",G,[e("div",M,[e("div",A,[t(V,{icon:"ri-arrow-right-line",variant:"text",color:"secondary",onClick:E,class:"me-3"}),e("div",null,[e("h1",F,a((y=l.value)==null?void 0:y.name),1),l.value?(c(),d("p",J,a(l.value.sku),1)):b("",!0)])]),e("div",T,[t(V,{color:"primary","prepend-icon":"ri-edit-line",onClick:N},{default:s(()=>o[0]||(o[0]=[m(" تعديل المنتج ")])),_:1})])]),v.value?(c(),d("div",H,[t(R)])):l.value?(c(),w(u,{key:1},{default:s(()=>[t(r,{cols:"12",md:"8"},{default:s(()=>[t(f,{title:"تفاصيل المنتج",icon:"ri-information-line",class:"mb-6"},{default:s(()=>[t(u,null,{default:s(()=>[t(r,{cols:"12",sm:"6"},{default:s(()=>{var n;return[o[1]||(o[1]=e("div",{class:"text-caption text-grey mb-1"},"الفئة",-1)),e("div",K,a(((n=l.value.category)==null?void 0:n.name)||"غير محددة"),1)]}),_:1}),t(r,{cols:"12",sm:"6"},{default:s(()=>{var n;return[o[2]||(o[2]=e("div",{class:"text-caption text-grey mb-1"},"العلامة التجارية",-1)),e("div",L,a(((n=l.value.brand)==null?void 0:n.name)||"بدون ماركة"),1)]}),_:1}),t(r,{cols:"12"},{default:s(()=>[t(S,{class:"my-3"}),o[3]||(o[3]=e("div",{class:"text-caption text-grey mb-2"},"وصف المنتج",-1)),e("div",O,a(l.value.description||"لا يوجد وصف متاح لهذا المنتج."),1)]),_:1})]),_:1})]),_:1}),t(f,{title:"التسعير والضرائب",icon:"ri-money-dollar-circle-line",class:"mb-6"},{default:s(()=>[t(u,null,{default:s(()=>[t(r,{cols:"12",md:"4"},{default:s(()=>[o[4]||(o[4]=e("div",{class:"text-caption text-grey mb-1"},"سعر التكلفة",-1)),e("div",Q,a(x(l.value.cost_price)),1)]),_:1}),t(r,{cols:"12",md:"4"},{default:s(()=>[o[5]||(o[5]=e("div",{class:"text-caption text-grey mb-1"},"سعر البيع",-1)),e("div",U,a(x(l.value.selling_price)),1)]),_:1}),t(r,{cols:"12",md:"4"},{default:s(()=>[o[6]||(o[6]=e("div",{class:"text-caption text-grey mb-1"},"نسبة الضريبة",-1)),e("div",W,a(l.value.tax_rate)+"%",1)]),_:1})]),_:1})]),_:1}),t(f,{title:"تفاصيل المخزون",icon:"ri-archive-line"},{default:s(()=>[t(u,null,{default:s(()=>[t(r,{cols:"12",md:"6"},{default:s(()=>{var n;return[o[7]||(o[7]=e("div",{class:"text-caption text-grey mb-1"},"المخزن الافتراضي",-1)),e("div",X,[t(g,{icon:"ri-building-line",size:"small",class:"me-1"}),m(" "+a(((n=l.value.warehouse)==null?void 0:n.name)||"غير محدد"),1)])]}),_:1}),t(r,{cols:"12",md:"6"},{default:s(()=>[o[8]||(o[8]=e("div",{class:"text-caption text-grey mb-1"},"الكمية المتوفرة",-1)),t(k,{color:B(l.value.stock_quantity),variant:"flat",class:"px-4 font-weight-bold"},{default:s(()=>[t(g,{icon:P(l.value.stock_quantity),size:"small",class:"me-1"},null,8,["icon"]),m(" "+a(l.value.stock_quantity||0)+" وحدة ",1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",md:"4"},{default:s(()=>[t(f,{title:"الحالة والصورة",icon:"ri-image-line"},{default:s(()=>[e("div",Y,[e("div",Z,[l.value.image?(c(),w($,{key:0,src:l.value.image,cover:"",height:"300",class:"rounded"},null,8,["src"])):(c(),d("div",q,[t(g,{icon:"ri-image-line",size:"80",color:"grey-lighten-2"}),o[9]||(o[9]=e("div",{class:"text-caption text-grey mt-2"},"لا توجد صورة للمنتج",-1))]))]),t(k,{color:l.value.is_active?"success":"error",variant:"flat",class:"px-6 font-weight-bold"},{default:s(()=>[m(a(l.value.is_active?"نشط متاح للبيع":"غير نشط"),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1})):b("",!0)])}}};export{nt as default};
