import{_ as b,z as w,r as t,P as U,k as c,j as a,aG as g,o as _,d as l,ap as x,b as f,a1 as E,a2 as P,a4 as q,a5 as s,a6 as d,a9 as p,t as T,M as B,q as N,aq as R,U as S,Z as j}from"./index-Tc2OuKZg.js";const D={__name:"EditProfile",setup(F){const V=w(),u=t({...V.user}),n=t(""),v=t(null),r=t(!1),i=t(!1);U(()=>{u.value={...V.user}});function k(){if(!v.value||(v.value.validate(),!r.value))return;const m={...u.value};n.value&&(m.password=n.value),j("user",m,m.id).then(e=>{V.user={...e.data}}).catch(e=>{console.error("Error saving user:",e)})}function y(){u.value={full_name:"",nickname:"",email:"",phone:"",username:""}}function C(){i.value=!i.value}return(m,e)=>(_(),c(g,null,{default:a(()=>[l(S,{class:"pa-4"},{default:a(()=>[l(x,null,{default:a(()=>e[7]||(e[7]=[f(" تعديل الملف الشخصي ")])),_:1}),l(E,null,{default:a(()=>[l(P,{ref_key:"formRef",ref:v,modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value=o)},{default:a(()=>[l(q,null,{default:a(()=>[l(s,{cols:"12",sm:"6"},{default:a(()=>[l(d,{modelValue:u.value.full_name,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.full_name=o),label:"الاسم الكامل",outlined:"",dense:"",required:""},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",sm:"6"},{default:a(()=>[l(d,{modelValue:u.value.nickname,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.nickname=o),label:"الاسم المستعار",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",sm:"6"},{default:a(()=>[l(d,{modelValue:u.value.email,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.email=o),label:"البريد الإلكتروني",outlined:"",dense:"",required:"",type:"email"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",sm:"6"},{default:a(()=>[l(d,{modelValue:u.value.phone,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.phone=o),label:"رقم الهاتف",outlined:"",dense:"",required:"",type:"tel"},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",sm:"6"},{default:a(()=>[l(d,{modelValue:u.value.username,"onUpdate:modelValue":e[4]||(e[4]=o=>u.value.username=o),label:"اسم المستخدم",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),l(s,{cols:"12",sm:"12"},{default:a(()=>[l(p,{color:"primary",onClick:C,elevation:"2",rounded:""},{default:a(()=>[f(T(i.value?"عدم تغير كلمة المرور":"تعديل كلمة المرور"),1)]),_:1})]),_:1}),l(B,{style:{width:"50%"},thickness:2,class:"border-opacity-100",color:"warning"}),l(s,{cols:"12",sm:"12",style:{"min-height":"88px"}},{default:a(()=>[i.value?(_(),c(s,{key:0,cols:"12",sm:"12"},{default:a(()=>[l(d,{modelValue:n.value,"onUpdate:modelValue":e[5]||(e[5]=o=>n.value=o),label:"كلمة المرور",outlined:"",dense:"",autocomplete:"new-password",rules:[o=>!o||o.length>=8||"كلمة المرور يجب أن تكون 8 أحرف على الأقل"]},null,8,["modelValue","rules"])]),_:1})):N("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(R,{class:"justify-end"},{default:a(()=>[l(p,{color:"primary",disabled:!r.value,onClick:k,elevation:"2",rounded:""},{default:a(()=>e[8]||(e[8]=[f(" حفظ ")])),_:1},8,["disabled"]),l(p,{color:"error",onClick:y,elevation:"2",rounded:""},{default:a(()=>e[9]||(e[9]=[f(" إلغاء ")])),_:1})]),_:1})]),_:1})]),_:1}))}},M=b(D,[["__scopeId","data-v-afe1fc19"]]);export{M as default};
