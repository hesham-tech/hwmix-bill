import{y as J,o as p,c as y,b as e,w as s,a as t,A as j,h as z,d as P,e as c,am as k,C as F,m as A,ai as X,f as w,an as G,t as N,r as x,z as le,k as R,v as S,F as O,i as K,ao as te,L as ae,B as se,G as U,D as I,ap as T,aq as H,ag as oe,ar as re,J as W,N as ie,K as ne,n as de,S as ue}from"./index-DPR0tjT6.js";import{u as me}from"./useProductsData-Dex-UGjI.js";import{u as E}from"./useApi-CTBDEoea.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce={class:"product-general-info"},pe={class:"d-flex align-center gap-3 mb-6"},fe={class:"d-flex align-center justify-space-between mb-2 px-1"},ve={class:"ms-3"},ge={class:"text-caption text-grey"},be={__name:"ProductGeneral",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,a=J({get:()=>f.modelValue,set:d=>V("update:modelValue",d)});return(d,o)=>(p(),y("div",ce,[e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white mb-6"},{default:s(()=>[t("div",pe,[e(j,{color:"info-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-information-line",color:"info"})]),_:1}),o[7]||(o[7]=t("h3",{class:"text-subtitle-1 font-weight-black"},"المعلومات الأساسية",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(k,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.name=l),label:"اسم المنتج",placeholder:"مثال: آيفون 15 برو ماكس",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",rules:[l=>!!l||"اسم المنتج مطلوب"],"persistent-placeholder":""},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(k,{modelValue:a.value.sku,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.sku=l),label:"SKU (كود المنتج)",placeholder:"اتركه فارغاً للتوليد التلقائي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(k,{modelValue:a.value.barcode,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.barcode=l),label:"الباركود (Barcode)",placeholder:"رقم الباركود العالمي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[t("div",fe,[o[9]||(o[9]=t("span",{class:"text-subtitle-2 font-weight-bold"},"وصف المنتج",-1)),e(F,{size:"x-small",color:"grey",variant:"tonal"},{default:s(()=>o[8]||(o[8]=[A("يدعم التنسيق الغني")])),_:1})]),e(X,{modelValue:a.value.desc,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.desc=l),placeholder:"اكتب وصفاً جذاباً للمنتج...",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",rows:"4","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12",sm:"4"},{default:s(()=>[e(w,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(G,{modelValue:a.value.active,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.active=l),color:"primary","hide-details":""},null,8,["modelValue"]),t("div",ve,[o[10]||(o[10]=t("div",{class:"text-body-2 font-weight-black"},"حالة المنتج",-1)),t("div",ge,N(a.value.active?"نشط ومعروض":"مسودة مخفية"),1)])]),_:1})]),_:1}),e(c,{cols:"12",sm:"4"},{default:s(()=>[e(w,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(G,{modelValue:a.value.featured,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.featured=l),color:"warning","hide-details":""},null,8,["modelValue"]),o[11]||(o[11]=t("div",{class:"ms-3"},[t("div",{class:"text-body-2 font-weight-black"},"منتج مميز"),t("div",{class:"text-caption text-grey"},"يظهر في الواجهة الرئيسية")],-1))]),_:1})]),_:1}),e(c,{cols:"12",sm:"4"},{default:s(()=>[e(w,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(G,{modelValue:a.value.returnable,"onUpdate:modelValue":o[6]||(o[6]=l=>a.value.returnable=l),color:"info","hide-details":""},null,8,["modelValue"]),o[12]||(o[12]=t("div",{class:"ms-3"},[t("div",{class:"text-body-2 font-weight-black"},"قابل للإرجاع"),t("div",{class:"text-caption text-grey"},"يخضع لسياسة الاستبدال")],-1))]),_:1})]),_:1})]),_:1})]))}},Ve=B(be,[["__scopeId","data-v-2d144033"]]),ye={class:"product-media-manager overflow-hidden"},he={key:0,class:"overlay-actions d-flex align-center justify-center gap-2"},xe={key:2,class:"drag-handle"},_e={__name:"ProductMedia",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,a=x(!1),d=x([...f.modelValue]),o=b=>{a.value=!1;const i=Array.from(b.dataTransfer.files);m(i)},l=b=>{const i=Array.from(b.target.files);m(i)},m=b=>{const i=b.filter(r=>r.type.startsWith("image/")).map(r=>({file:r,preview:URL.createObjectURL(r),id:Math.random().toString(36).substr(2,9)}));d.value=[...d.value,...i],V("update:modelValue",d.value)},L=b=>{d.value.splice(b,1),V("update:modelValue",d.value)},D=b=>{const i=d.value.splice(b,1)[0];d.value.unshift(i),V("update:modelValue",d.value)};return(b,i)=>(p(),y("div",ye,[t("div",{class:le(["upload-zone pa-8 rounded-xl border-dashed border-2 text-center transition-all",{"border-primary bg-primary-lighten-5 scale-98":a.value}]),onDragover:i[0]||(i[0]=R(r=>a.value=!0,["prevent"])),onDragleave:i[1]||(i[1]=R(r=>a.value=!1,["prevent"])),onDrop:R(o,["prevent"]),onClick:i[2]||(i[2]=r=>b.$refs.fileInput.click())},[t("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",class:"d-none",onChange:l},null,544),e(j,{size:"64",color:"primary-lighten-5",class:"mb-4"},{default:s(()=>[e(z,{icon:"ri-upload-cloud-2-line",color:"primary",size:"32"})]),_:1}),i[4]||(i[4]=t("h3",{class:"text-h6 font-weight-black mb-1"},"اسحب وأفلت صور المنتج هنا",-1)),i[5]||(i[5]=t("p",{class:"text-body-2 text-grey-darken-1"},"أو اضغط لاختيار ملفات من جهازك (يدعم JPG, PNG, WebP)",-1)),e(F,{size:"small",variant:"tonal",color:"primary",class:"mt-2 text-caption"},{default:s(()=>i[3]||(i[3]=[A(" يسع حتى 10 صور بدقة عالية ")])),_:1})],34),d.value.length?(p(),S(P,{key:0,class:"mt-6",dense:""},{default:s(()=>[(p(!0),y(O,null,K(d.value,(r,n)=>(p(),S(c,{key:r.id||n,cols:"6",sm:"4",md:"3",lg:"2"},{default:s(()=>[e(te,null,{default:s(({isHovering:v,props:u})=>[e(w,ae({ref_for:!0},u,{class:["media-item-card rounded-xl overflow-hidden elevation-1 relative",{"is-primary":n===0}]}),{default:s(()=>[e(se,{src:r.preview||r.url,"aspect-ratio":"1",cover:""},{default:s(()=>[v?(p(),y("div",he,[e(U,{icon:"ri-delete-bin-line",color:"error",size:"x-small",variant:"flat",onClick:R(C=>L(n),["stop"])},null,8,["onClick"]),n!==0?(p(),S(U,{key:0,icon:"ri-star-line",color:"primary",size:"x-small",variant:"flat",title:"تعيين كصورة أساسية",onClick:R(C=>D(n),["stop"])},null,8,["onClick"])):I("",!0)])):I("",!0),n===0?(p(),S(F,{key:1,size:"x-small",color:"primary",variant:"flat",class:"primary-label px-2"},{default:s(()=>i[6]||(i[6]=[A(" الأساسية ")])),_:1})):I("",!0),v?(p(),y("div",xe,[e(z,{icon:"ri-drag-move-2-line",color:"white",size:"18"})])):I("",!0)]),_:2},1032,["src"])]),_:2},1040,["class"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):I("",!0)]))}},we=B(_e,[["__scopeId","data-v-74c0c5b5"]]),ke={class:"product-pricing-inventory"},$e={class:"d-flex align-center gap-3 mb-6"},Ue={class:"d-flex align-center gap-3 mb-6"},Ae={__name:"ProductPricing",props:{modelValue:{type:Object,required:!0},warehouses:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,a=J({get:()=>f.modelValue,set:d=>V("update:modelValue",d)});return(d,o)=>(p(),y("div",ke,[e(P,null,{default:s(()=>[e(c,{cols:"12",md:"6"},{default:s(()=>[e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white h-100"},{default:s(()=>[t("div",$e,[e(j,{color:"primary-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-money-dollar-circle-line",color:"primary"})]),_:1}),o[6]||(o[6]=t("h3",{class:"text-subtitle-1 font-weight-black"},"إعدادات التسعير",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12",sm:"6"},{default:s(()=>[e(k,{modelValue:a.value.retail_price,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.retail_price=l),modelModifiers:{number:!0},label:"سعر البيع (قطاعي)",prefix:"ج.م",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:s(()=>[e(k,{modelValue:a.value.wholesale_price,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.wholesale_price=l),modelModifiers:{number:!0},label:"سعر البيع (جمله)",prefix:"ج.م",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[e(k,{modelValue:a.value.tax,"onUpdate:modelValue":o[2]||(o[2]=l=>a.value.tax=l),modelModifiers:{number:!0},label:"الضريبة المفروضة",suffix:"%",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white h-100"},{default:s(()=>[t("div",Ue,[e(j,{color:"warning-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-home-gear-line",color:"warning"})]),_:1}),o[7]||(o[7]=t("h3",{class:"text-subtitle-1 font-weight-black"},"المخزون واللوجستيات",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(T,{modelValue:a.value.warehouse_id,"onUpdate:modelValue":o[3]||(o[3]=l=>a.value.warehouse_id=l),items:g.warehouses,"item-title":"name","item-value":"id",label:"المخزن الافتراضي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"6"},{default:s(()=>[e(k,{modelValue:a.value.min_quantity,"onUpdate:modelValue":o[4]||(o[4]=l=>a.value.min_quantity=l),modelModifiers:{number:!0},label:"الحد الأدنى",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number",hint:"تنبيه عند نقص الكمية","container-class":"pb-0"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:s(()=>[e(k,{modelValue:a.value.weight,"onUpdate:modelValue":o[5]||(o[5]=l=>a.value.weight=l),modelModifiers:{number:!0},label:"الوزن (كجم)",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},Ce=B(Ae,[["__scopeId","data-v-154dfc1c"]]),Pe={class:"product-variants-builder"},ze={class:"variants-setup-glass pa-6 rounded-xl border mb-6"},De={class:"d-flex align-center justify-space-between mb-6"},Ie={key:0,class:"text-center mt-6"},Me={key:0,class:"variants-matrix mt-8"},Se={class:"d-flex align-center justify-space-between mb-4 px-2"},je={class:"text-subtitle-1 font-weight-black"},Be={class:"d-flex gap-2"},Le={class:"glass-table-wrapper rounded-xl border overflow-hidden"},Re={class:"font-weight-bold"},Fe={class:"d-flex align-center gap-2"},qe={class:"text-center"},Ee={class:"text-center"},Ge={__name:"ProductVariants",props:{modelValue:{type:Array,default:()=>[]},availableAttributes:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,a=x([]),d=x([...f.modelValue]),o=x(!1),l=()=>{a.value.push({id:null,selectedValues:[],availableValues:[]})},m=i=>{a.value.splice(i,1)},L=i=>{const r=a.value[i],n=f.availableAttributes.find(v=>v.id===r.id);n&&(r.availableValues=n.values||[])},D=()=>{o.ref=!0;const i=a.value.reduce((r,n)=>{if(n.selectedValues.length===0)return r;const v=[];return n.selectedValues.forEach(u=>{r.length===0?v.push({label:u.name||u,values:[u]}):r.forEach(C=>{v.push({label:`${C.label} / ${u.name||u}`,values:[...C.values,u]})})}),v},[]);d.value=i.map(r=>({label:r.label,values:r.values,sku:"",price_modifier:0,stock:0,enabled:!0})),o.value=!1,V("update:modelValue",d.value)},b=i=>{d.value.splice(i,1),V("update:modelValue",d.value)};return(i,r)=>(p(),y("div",Pe,[t("div",ze,[t("div",De,[r[1]||(r[1]=t("div",null,[t("h3",{class:"text-h6 font-weight-black mb-1"},"بناء المتغيرات"),t("p",{class:"text-body-2 text-grey-darken-1"},"أضف سمات مثل (اللون، المقاس، الخامة) لتوليد تشكيلات المنتج")],-1)),e(U,{color:"primary","prepend-icon":"ri-add-line",variant:"tonal",rounded:"xl",onClick:l},{default:s(()=>r[0]||(r[0]=[A(" إضافة سمة ")])),_:1})]),(p(!0),y(O,null,K(a.value,(n,v)=>(p(),y("div",{key:v,class:"attr-row-glass pa-4 rounded-lg mb-4 bg-white border"},[e(P,{dense:"",align:"center"},{default:s(()=>[e(c,{cols:"12",md:"3"},{default:s(()=>[e(T,{modelValue:n.id,"onUpdate:modelValue":[u=>n.id=u,u=>L(v)],items:g.availableAttributes,"item-title":"name","item-value":"id",label:"السمة",variant:"solo",flat:"",density:"comfortable","hide-details":"","bg-color":"grey-lighten-4"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(c,{cols:"12",md:"7"},{default:s(()=>[e(H,{modelValue:n.selectedValues,"onUpdate:modelValue":u=>n.selectedValues=u,items:n.availableValues,"item-title":"name",label:"القيم المختارة",multiple:"",chips:"","closable-chips":"",variant:"solo",flat:"",density:"comfortable","hide-details":"","bg-color":"grey-lighten-4",placeholder:"مثال: أحمر، أخضر، XL..."},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(c,{cols:"12",md:"2",class:"text-end"},{default:s(()=>[e(U,{icon:"ri-delete-bin-7-line",color:"error",variant:"text",onClick:u=>m(v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),a.value.length>0?(p(),y("div",Ie,[e(U,{color:"primary",size:"large",class:"px-8 font-weight-black",rounded:"xl","prepend-icon":"ri-magic-line",loading:o.value,onClick:D},{default:s(()=>r[2]||(r[2]=[A(" توليد تشكيلات المتغيرات ")])),_:1},8,["loading"])])):I("",!0)]),e(re,null,{default:s(()=>[d.value.length>0?(p(),y("div",Me,[t("div",Se,[t("h4",je,"تشكيلات المتغيرات المختارة ("+N(d.value.length)+")",1),t("div",Be,[e(U,{size:"small",variant:"text",color:"primary","prepend-icon":"ri-edit-line"},{default:s(()=>r[3]||(r[3]=[A("تعديل جماعي")])),_:1})])]),t("div",Le,[e(oe,{density:"comfortable",class:"premium-table"},{default:s(()=>[r[4]||(r[4]=t("thead",null,[t("tr",{class:"bg-grey-lighten-5"},[t("th",{class:"text-right"},"المتغير"),t("th",{class:"text-right"},"SKU"),t("th",{class:"text-right"},"السعر الإضافي"),t("th",{class:"text-right"},"الكمية"),t("th",{class:"text-center"},"الحالة"),t("th",{class:"text-center"},"حذف")])],-1)),t("tbody",null,[(p(!0),y(O,null,K(d.value,(n,v)=>(p(),y("tr",{key:v,class:"variant-row"},[t("td",Re,[t("div",Fe,[e(j,{size:"32",color:"grey-lighten-4",class:"rounded-lg"},{default:s(()=>[e(z,{icon:"ri-box-3-line",size:"16"})]),_:1}),t("span",null,N(n.label),1)])]),t("td",null,[e(k,{modelValue:n.sku,"onUpdate:modelValue":u=>n.sku=u,variant:"plain",density:"compact","hide-details":"",class:"sku-input"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[e(k,{modelValue:n.price_modifier,"onUpdate:modelValue":u=>n.price_modifier=u,modelModifiers:{number:!0},prefix:"+",variant:"plain",density:"compact","hide-details":"",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[e(k,{modelValue:n.stock,"onUpdate:modelValue":u=>n.stock=u,modelModifiers:{number:!0},variant:"plain",density:"compact","hide-details":"",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",qe,[e(G,{modelValue:n.enabled,"onUpdate:modelValue":u=>n.enabled=u,color:"primary","hide-details":"",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",Ee,[e(U,{icon:"ri-close-circle-line",size:"x-small",color:"grey",variant:"text",onClick:u=>b(v)},null,8,["onClick"])])]))),128))])]),_:1})])])):I("",!0)]),_:1})]))}},Ne=B(Ge,[["__scopeId","data-v-7eb3e469"]]),Te={class:"product-form-overhaul"},Oe={class:"sticky-header pa-4 glass-blur border-b"},Ke={class:"container-premium d-flex align-center justify-space-between mx-auto"},Je={class:"d-flex align-center gap-4"},We={class:"text-caption text-grey d-flex align-center gap-1"},Xe={class:"text-h6 font-weight-black mb-0"},He={class:"d-flex align-center gap-3"},Qe={class:"main-content-wrapper pa-6 bg-grey-lighten-5 min-h-screen"},Ye={class:"container-premium mx-auto"},Ze={class:"d-flex flex-column gap-6"},el={class:"d-flex align-center gap-3 mb-6"},ll={class:"sticky-sidebar d-flex flex-column gap-6"},tl={__name:"ProductForm",props:{modelValue:{type:Object,required:!0},categories:{type:Array,default:()=>[]},brands:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},availableAttributes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue","submit","cancel"],setup(g,{emit:h}){const f=g,V=h,a=x({...f.modelValue,images:f.modelValue.images||[],variants:f.modelValue.variants||[],tags:f.modelValue.tags||[],active:f.modelValue.active??!0});W(()=>f.modelValue,o=>{a.value={...o}},{deep:!0}),W(a,o=>{V("update:modelValue",o)},{deep:!0});const d=()=>{V("submit",a.value)};return(o,l)=>(p(),y("div",Te,[t("div",Oe,[t("div",Ke,[t("div",Je,[e(U,{icon:"ri-arrow-right-line",variant:"text",onClick:l[0]||(l[0]=m=>o.$emit("cancel"))}),t("div",null,[t("div",We,[l[10]||(l[10]=t("span",null,"المنتجات",-1)),e(z,{icon:"ri-arrow-left-s-line",size:"14"}),l[11]||(l[11]=t("span",null,"إضافة منتج جديد",-1))]),t("h1",Xe,N(a.value.name||"منتج بدون اسم تحليلي"),1)])]),t("div",He,[a.value.active?(p(),S(F,{key:0,color:"success",size:"small",variant:"flat",class:"font-weight-bold"},{default:s(()=>l[12]||(l[12]=[A("نشط")])),_:1})):(p(),S(F,{key:1,color:"grey",size:"small",variant:"flat",class:"font-weight-bold"},{default:s(()=>l[13]||(l[13]=[A("مسودة")])),_:1})),e(ie,{vertical:"",class:"mx-2"}),e(U,{variant:"text",color:"grey-darken-1",class:"font-weight-bold",onClick:l[1]||(l[1]=m=>o.$emit("cancel"))},{default:s(()=>l[14]||(l[14]=[A("تجاهل")])),_:1}),e(U,{color:"primary",size:"large",rounded:"xl",class:"px-8 font-weight-black elevation-4",loading:g.loading,"prepend-icon":"ri-shield-check-line",onClick:d},{default:s(()=>l[15]||(l[15]=[A(" حفظ المنتج النهائي ")])),_:1},8,["loading"])])])]),t("div",Qe,[t("div",Ye,[e(P,null,{default:s(()=>[e(c,{cols:"12",lg:"8"},{default:s(()=>[t("div",Ze,[e(Ve,{modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=m=>a.value=m)},null,8,["modelValue"]),e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[t("div",el,[e(j,{color:"secondary-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-image-2-line",color:"secondary"})]),_:1}),l[16]||(l[16]=t("h3",{class:"text-subtitle-1 font-weight-black"},"معرض الصور",-1))]),e(we,{modelValue:a.value.images,"onUpdate:modelValue":l[3]||(l[3]=m=>a.value.images=m)},null,8,["modelValue"])]),_:1}),e(Ce,{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=m=>a.value=m),warehouses:g.warehouses},null,8,["modelValue","warehouses"]),e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white mb-6"},{default:s(()=>[e(Ne,{modelValue:a.value.variants,"onUpdate:modelValue":l[5]||(l[5]=m=>a.value.variants=m),"available-attributes":g.availableAttributes},null,8,["modelValue","available-attributes"])]),_:1})])]),_:1}),e(c,{cols:"12",lg:"4"},{default:s(()=>[t("div",ll,[e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[17]||(l[17]=t("h3",{class:"text-subtitle-1 font-weight-black mb-6"},"التصنيف والبراند",-1)),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(T,{modelValue:a.value.category_id,"onUpdate:modelValue":l[6]||(l[6]=m=>a.value.category_id=m),items:g.categories,"item-title":"name","item-value":"id",label:"الفئة الأساسية",variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[e(T,{modelValue:a.value.brand_id,"onUpdate:modelValue":l[7]||(l[7]=m=>a.value.brand_id=m),items:g.brands,"item-title":"name","item-value":"id",label:"العلامة التجارية",variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[18]||(l[18]=t("h3",{class:"text-subtitle-1 font-weight-black mb-1"},"الكلمات الدلالية",-1)),l[19]||(l[19]=t("p",{class:"text-caption text-grey mb-4"},"تساعد على تسريع البحث داخل النظام",-1)),e(H,{modelValue:a.value.tags,"onUpdate:modelValue":l[8]||(l[8]=m=>a.value.tags=m),multiple:"",chips:"","closable-chips":"",variant:"solo",flat:"","bg-color":"grey-lighten-4",placeholder:"أضف تاجات...",class:"premium-input-field"},null,8,["modelValue"])]),_:1}),e(w,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[20]||(l[20]=t("h3",{class:"text-subtitle-1 font-weight-black mb-1"},"ملاحظات داخلية",-1)),l[21]||(l[21]=t("p",{class:"text-caption text-grey mb-4"},"ملاحظات لا يراها العميل",-1)),e(X,{modelValue:a.value.internal_note,"onUpdate:modelValue":l[9]||(l[9]=m=>a.value.internal_note=m),variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field",rows:"3"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})])])]))}},al=B(tl,[["__scopeId","data-v-f7d34fce"]]),sl={class:"product-create-container"},ol={__name:"ProductCreate",setup(g){const h=de(),f=ue(),{getProduct:V,createProduct:a,updateProduct:d}=me(),o=E("/api/categories"),l=E("/api/brands"),m=E("/api/warehouses"),L=E("/api/attributes"),D=x(!1),b=x({}),i=x([]),r=x([]),n=x([]),v=x([]),u=x({name:"",sku:"",barcode:"",category_id:null,brand_id:null,desc:"",desc_long:"",retail_price:0,wholesale_price:0,tax:0,warehouse_id:null,min_quantity:1,weight:0,active:!0,featured:!1,returnable:!0,images:[],variants:[],tags:[],internal_note:""}),C=J(()=>!!f.params.id),Q=async()=>{try{const[$,_,M,q]=await Promise.all([o.get({per_page:100},{showLoading:!1}),l.get({per_page:100},{showLoading:!1}),m.get({per_page:100},{showLoading:!1}),L.get({per_page:100},{showLoading:!1})]);i.value=$.data||[],r.value=_.data||[],n.value=M.data||[],v.value=q.data||[]}catch($){console.error("Failed to load initial data:",$)}},Y=async()=>{if(C.value)try{const _=(await V(f.params.id)).data;u.value={..._,images:_.images||[],variants:_.variants||[],tags:_.tags||[]}}catch($){console.error("Error loading product:",$),h.push("/products")}},Z=async $=>{var _,M;D.value=!0,b.value={};try{C.value?await d(f.params.id,$):await a($),h.push("/products")}catch(q){(M=(_=q.response)==null?void 0:_.data)!=null&&M.errors&&(b.value=q.response.data.errors)}finally{D.value=!1}},ee=()=>{h.push("/products")};return ne(async()=>{await Q(),C.value&&await Y()}),($,_)=>(p(),y("div",sl,[e(al,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=M=>u.value=M),categories:i.value,brands:r.value,warehouses:n.value,"available-attributes":v.value,loading:D.value,errors:b.value,"is-edit":C.value,onSubmit:Z,onCancel:ee},null,8,["modelValue","categories","brands","warehouses","available-attributes","loading","errors","is-edit"])]))}},ul=B(ol,[["__scopeId","data-v-d566d770"]]);export{ul as default};
