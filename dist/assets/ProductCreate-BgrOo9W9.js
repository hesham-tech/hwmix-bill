import{a as B,z as W,o as p,c as y,d as e,w as s,b as a,B as S,i as z,e as P,f as c,ao as k,D as E,n as A,ak as J,h as _,ap as O,v as T,r as x,A as le,l as R,x as j,F as N,j as K,aq as ae,M as te,C as se,H as U,E as I,ar as G,as as X,ai as oe,at as re,K as H,O as ie,L as de,p as ne,U as ue}from"./index-B0c0aplS.js";import{u as me}from"./useProductsData-D_v0k18Z.js";import{u as q}from"./useApi-C9JqAxpT.js";const ce={class:"product-general-info"},pe={class:"d-flex align-center gap-3 mb-6"},fe={class:"d-flex align-center justify-space-between mb-2 px-1"},ve={class:"ms-3"},ge={class:"text-caption text-grey"},be={__name:"ProductGeneral",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,t=W({get:()=>f.modelValue,set:n=>V("update:modelValue",n)});return(n,o)=>(p(),y("div",ce,[e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white mb-6"},{default:s(()=>[a("div",pe,[e(S,{color:"info-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-information-line",color:"info"})]),_:1}),o[7]||(o[7]=a("h3",{class:"text-subtitle-1 font-weight-black"},"المعلومات الأساسية",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(k,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.name=l),label:"اسم المنتج",placeholder:"مثال: آيفون 15 برو ماكس",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",rules:[l=>!!l||"اسم المنتج مطلوب"],"persistent-placeholder":""},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(k,{modelValue:t.value.sku,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.sku=l),label:"SKU (كود المنتج)",placeholder:"اتركه فارغاً للتوليد التلقائي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(k,{modelValue:t.value.barcode,"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.barcode=l),label:"الباركود (Barcode)",placeholder:"رقم الباركود العالمي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[a("div",fe,[o[9]||(o[9]=a("span",{class:"text-subtitle-2 font-weight-bold"},"وصف المنتج",-1)),e(E,{size:"x-small",color:"grey",variant:"tonal"},{default:s(()=>o[8]||(o[8]=[A("يدعم التنسيق الغني")])),_:1})]),e(J,{modelValue:t.value.desc,"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.desc=l),placeholder:"اكتب وصفاً جذاباً للمنتج...",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",rows:"4","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12",sm:"4"},{default:s(()=>[e(_,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(O,{modelValue:t.value.active,"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.active=l),color:"primary","hide-details":""},null,8,["modelValue"]),a("div",ve,[o[10]||(o[10]=a("div",{class:"text-body-2 font-weight-black"},"حالة المنتج",-1)),a("div",ge,T(t.value.active?"نشط ومعروض":"مسودة مخفية"),1)])]),_:1})]),_:1}),e(c,{cols:"12",sm:"4"},{default:s(()=>[e(_,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(O,{modelValue:t.value.featured,"onUpdate:modelValue":o[5]||(o[5]=l=>t.value.featured=l),color:"warning","hide-details":""},null,8,["modelValue"]),o[11]||(o[11]=a("div",{class:"ms-3"},[a("div",{class:"text-body-2 font-weight-black"},"منتج مميز"),a("div",{class:"text-caption text-grey"},"يظهر في الواجهة الرئيسية")],-1))]),_:1})]),_:1}),e(c,{cols:"12",sm:"4"},{default:s(()=>[e(_,{variant:"outlined",class:"pa-4 rounded-xl d-flex align-center border-dashed"},{default:s(()=>[e(O,{modelValue:t.value.returnable,"onUpdate:modelValue":o[6]||(o[6]=l=>t.value.returnable=l),color:"info","hide-details":""},null,8,["modelValue"]),o[12]||(o[12]=a("div",{class:"ms-3"},[a("div",{class:"text-body-2 font-weight-black"},"قابل للإرجاع"),a("div",{class:"text-caption text-grey"},"يخضع لسياسة الاستبدال")],-1))]),_:1})]),_:1})]),_:1})]))}},Ve=B(be,[["__scopeId","data-v-2d144033"]]),ye={class:"product-media-manager overflow-hidden"},he={key:0,class:"overlay-actions d-flex align-center justify-center gap-2"},xe={key:2,class:"drag-handle"},we={__name:"ProductMedia",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,t=x(!1),n=x([...f.modelValue]),o=b=>{t.value=!1;const i=Array.from(b.dataTransfer.files);m(i)},l=b=>{const i=Array.from(b.target.files);m(i)},m=b=>{const i=b.filter(r=>r.type.startsWith("image/")).map(r=>({file:r,preview:URL.createObjectURL(r),id:Math.random().toString(36).substr(2,9)}));n.value=[...n.value,...i],V("update:modelValue",n.value)},L=b=>{n.value.splice(b,1),V("update:modelValue",n.value)},D=b=>{const i=n.value.splice(b,1)[0];n.value.unshift(i),V("update:modelValue",n.value)};return(b,i)=>(p(),y("div",ye,[a("div",{class:le(["upload-zone pa-8 rounded-xl border-dashed border-2 text-center transition-all",{"border-primary bg-primary-lighten-5 scale-98":t.value}]),onDragover:i[0]||(i[0]=R(r=>t.value=!0,["prevent"])),onDragleave:i[1]||(i[1]=R(r=>t.value=!1,["prevent"])),onDrop:R(o,["prevent"]),onClick:i[2]||(i[2]=r=>b.$refs.fileInput.click())},[a("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/*",class:"d-none",onChange:l},null,544),e(S,{size:"64",color:"primary-lighten-5",class:"mb-4"},{default:s(()=>[e(z,{icon:"ri-upload-cloud-2-line",color:"primary",size:"32"})]),_:1}),i[4]||(i[4]=a("h3",{class:"text-h6 font-weight-black mb-1"},"اسحب وأفلت صور المنتج هنا",-1)),i[5]||(i[5]=a("p",{class:"text-body-2 text-grey-darken-1"},"أو اضغط لاختيار ملفات من جهازك (يدعم JPG, PNG, WebP)",-1)),e(E,{size:"small",variant:"tonal",color:"primary",class:"mt-2 text-caption"},{default:s(()=>i[3]||(i[3]=[A(" يسع حتى 10 صور بدقة عالية ")])),_:1})],34),n.value.length?(p(),j(P,{key:0,class:"mt-6",dense:""},{default:s(()=>[(p(!0),y(N,null,K(n.value,(r,d)=>(p(),j(c,{key:r.id||d,cols:"6",sm:"4",md:"3",lg:"2"},{default:s(()=>[e(ae,null,{default:s(({isHovering:v,props:u})=>[e(_,te({ref_for:!0},u,{class:["media-item-card rounded-xl overflow-hidden elevation-1 relative",{"is-primary":d===0}]}),{default:s(()=>[e(se,{src:r.preview||r.url,"aspect-ratio":"1",cover:""},{default:s(()=>[v?(p(),y("div",he,[e(U,{icon:"ri-delete-bin-line",color:"error",size:"x-small",variant:"flat",onClick:R(C=>L(d),["stop"])},null,8,["onClick"]),d!==0?(p(),j(U,{key:0,icon:"ri-star-line",color:"primary",size:"x-small",variant:"flat",title:"تعيين كصورة أساسية",onClick:R(C=>D(d),["stop"])},null,8,["onClick"])):I("",!0)])):I("",!0),d===0?(p(),j(E,{key:1,size:"x-small",color:"primary",variant:"flat",class:"primary-label px-2"},{default:s(()=>i[6]||(i[6]=[A(" الأساسية ")])),_:1})):I("",!0),v?(p(),y("div",xe,[e(z,{icon:"ri-drag-move-2-line",color:"white",size:"18"})])):I("",!0)]),_:2},1032,["src"])]),_:2},1040,["class"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):I("",!0)]))}},_e=B(we,[["__scopeId","data-v-74c0c5b5"]]),ke={class:"product-pricing-inventory"},$e={class:"d-flex align-center gap-3 mb-6"},Ue={class:"d-flex align-center gap-3 mb-6"},Ae={__name:"ProductPricing",props:{modelValue:{type:Object,required:!0},warehouses:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,t=W({get:()=>f.modelValue,set:n=>V("update:modelValue",n)});return(n,o)=>(p(),y("div",ke,[e(P,null,{default:s(()=>[e(c,{cols:"12",md:"6"},{default:s(()=>[e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white h-100"},{default:s(()=>[a("div",$e,[e(S,{color:"primary-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-money-dollar-circle-line",color:"primary"})]),_:1}),o[6]||(o[6]=a("h3",{class:"text-subtitle-1 font-weight-black"},"إعدادات التسعير",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12",sm:"6"},{default:s(()=>[e(k,{modelValue:t.value.retail_price,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.retail_price=l),modelModifiers:{number:!0},label:"سعر البيع (قطاعي)",prefix:"ج.م",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",sm:"6"},{default:s(()=>[e(k,{modelValue:t.value.wholesale_price,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.wholesale_price=l),modelModifiers:{number:!0},label:"سعر البيع (جمله)",prefix:"ج.م",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[e(k,{modelValue:t.value.tax,"onUpdate:modelValue":o[2]||(o[2]=l=>t.value.tax=l),modelModifiers:{number:!0},label:"الضريبة المفروضة",suffix:"%",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:s(()=>[e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white h-100"},{default:s(()=>[a("div",Ue,[e(S,{color:"warning-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-home-gear-line",color:"warning"})]),_:1}),o[7]||(o[7]=a("h3",{class:"text-subtitle-1 font-weight-black"},"المخزون واللوجستيات",-1))]),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(G,{modelValue:t.value.warehouse_id,"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.warehouse_id=l),items:g.warehouses,"item-title":"name","item-value":"id",label:"المخزن الافتراضي",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"6"},{default:s(()=>[e(k,{modelValue:t.value.min_quantity,"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.min_quantity=l),modelModifiers:{number:!0},label:"الحد الأدنى",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number",hint:"تنبيه عند نقص الكمية","container-class":"pb-0"},null,8,["modelValue"])]),_:1}),e(c,{cols:"6"},{default:s(()=>[e(k,{modelValue:t.value.weight,"onUpdate:modelValue":o[5]||(o[5]=l=>t.value.weight=l),modelModifiers:{number:!0},label:"الوزن (كجم)",variant:"solo",flat:"","bg-color":"grey-lighten-5",class:"premium-input-field",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},Ce=B(Ae,[["__scopeId","data-v-154dfc1c"]]),Pe={class:"product-variants-builder"},ze={class:"variants-setup-glass pa-6 rounded-xl border mb-6"},De={class:"d-flex align-center justify-space-between mb-6"},Ie={key:0,class:"text-center mt-6"},Me={key:0,class:"variants-matrix mt-8"},je={class:"d-flex align-center justify-space-between mb-4 px-2"},Se={class:"text-subtitle-1 font-weight-black"},Be={class:"d-flex gap-2"},Le={class:"glass-table-wrapper rounded-xl border overflow-hidden"},Re={class:"font-weight-bold"},Ee={class:"d-flex align-center gap-2"},Fe={class:"text-center"},qe={class:"text-center"},Oe={__name:"ProductVariants",props:{modelValue:{type:Array,default:()=>[]},availableAttributes:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:h}){const f=g,V=h,t=x([]),n=x([...f.modelValue]),o=x(!1),l=()=>{t.value.push({id:null,selectedValues:[],availableValues:[]})},m=i=>{t.value.splice(i,1)},L=i=>{const r=t.value[i],d=f.availableAttributes.find(v=>v.id===r.id);d&&(r.availableValues=d.values||[])},D=()=>{o.ref=!0;const i=t.value.reduce((r,d)=>{if(d.selectedValues.length===0)return r;const v=[];return d.selectedValues.forEach(u=>{r.length===0?v.push({label:u.name||u,values:[u]}):r.forEach(C=>{v.push({label:`${C.label} / ${u.name||u}`,values:[...C.values,u]})})}),v},[]);n.value=i.map(r=>({label:r.label,values:r.values,sku:"",price_modifier:0,stock:0,enabled:!0})),o.value=!1,V("update:modelValue",n.value)},b=i=>{n.value.splice(i,1),V("update:modelValue",n.value)};return(i,r)=>(p(),y("div",Pe,[a("div",ze,[a("div",De,[r[1]||(r[1]=a("div",null,[a("h3",{class:"text-h6 font-weight-black mb-1"},"بناء المتغيرات"),a("p",{class:"text-body-2 text-grey-darken-1"},"أضف سمات مثل (اللون، المقاس، الخامة) لتوليد تشكيلات المنتج")],-1)),e(U,{color:"primary","prepend-icon":"ri-add-line",variant:"tonal",rounded:"xl",onClick:l},{default:s(()=>r[0]||(r[0]=[A(" إضافة سمة ")])),_:1})]),(p(!0),y(N,null,K(t.value,(d,v)=>(p(),y("div",{key:v,class:"attr-row-glass pa-4 rounded-lg mb-4 bg-white border"},[e(P,{dense:"",align:"center"},{default:s(()=>[e(c,{cols:"12",md:"3"},{default:s(()=>[e(G,{modelValue:d.id,"onUpdate:modelValue":[u=>d.id=u,u=>L(v)],items:g.availableAttributes,"item-title":"name","item-value":"id",label:"السمة",variant:"solo",flat:"",density:"comfortable","hide-details":"","bg-color":"grey-lighten-4"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(c,{cols:"12",md:"7"},{default:s(()=>[e(X,{modelValue:d.selectedValues,"onUpdate:modelValue":u=>d.selectedValues=u,items:d.availableValues,"item-title":"name",label:"القيم المختارة",multiple:"",chips:"","closable-chips":"",variant:"solo",flat:"",density:"comfortable","hide-details":"","bg-color":"grey-lighten-4",placeholder:"مثال: أحمر، أخضر، XL..."},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(c,{cols:"12",md:"2",class:"text-end"},{default:s(()=>[e(U,{icon:"ri-delete-bin-7-line",color:"error",variant:"text",onClick:u=>m(v)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),t.value.length>0?(p(),y("div",Ie,[e(U,{color:"primary",size:"large",class:"px-8 font-weight-black",rounded:"xl","prepend-icon":"ri-magic-line",loading:o.value,onClick:D},{default:s(()=>r[2]||(r[2]=[A(" توليد تشكيلات المتغيرات ")])),_:1},8,["loading"])])):I("",!0)]),e(re,null,{default:s(()=>[n.value.length>0?(p(),y("div",Me,[a("div",je,[a("h4",Se,"تشكيلات المتغيرات المختارة ("+T(n.value.length)+")",1),a("div",Be,[e(U,{size:"small",variant:"text",color:"primary","prepend-icon":"ri-edit-line"},{default:s(()=>r[3]||(r[3]=[A("تعديل جماعي")])),_:1})])]),a("div",Le,[e(oe,{density:"comfortable",class:"premium-table"},{default:s(()=>[r[4]||(r[4]=a("thead",null,[a("tr",{class:"bg-grey-lighten-5"},[a("th",{class:"text-right"},"المتغير"),a("th",{class:"text-right"},"SKU"),a("th",{class:"text-right"},"السعر الإضافي"),a("th",{class:"text-right"},"الكمية"),a("th",{class:"text-center"},"الحالة"),a("th",{class:"text-center"},"حذف")])],-1)),a("tbody",null,[(p(!0),y(N,null,K(n.value,(d,v)=>(p(),y("tr",{key:v,class:"variant-row"},[a("td",Re,[a("div",Ee,[e(S,{size:"32",color:"grey-lighten-4",class:"rounded-lg"},{default:s(()=>[e(z,{icon:"ri-box-3-line",size:"16"})]),_:1}),a("span",null,T(d.label),1)])]),a("td",null,[e(k,{modelValue:d.sku,"onUpdate:modelValue":u=>d.sku=u,variant:"plain",density:"compact","hide-details":"",class:"sku-input"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",null,[e(k,{modelValue:d.price_modifier,"onUpdate:modelValue":u=>d.price_modifier=u,modelModifiers:{number:!0},prefix:"+",variant:"plain",density:"compact","hide-details":"",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",null,[e(k,{modelValue:d.stock,"onUpdate:modelValue":u=>d.stock=u,modelModifiers:{number:!0},variant:"plain",density:"compact","hide-details":"",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",Fe,[e(O,{modelValue:d.enabled,"onUpdate:modelValue":u=>d.enabled=u,color:"primary","hide-details":"",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),a("td",qe,[e(U,{icon:"ri-close-circle-line",size:"x-small",color:"grey",variant:"text",onClick:u=>b(v)},null,8,["onClick"])])]))),128))])]),_:1})])])):I("",!0)]),_:1})]))}},Te=B(Oe,[["__scopeId","data-v-7eb3e469"]]),Ge={class:"product-form-overhaul"},Ne={class:"sticky-header pa-4 glass-blur border-b"},Ke={class:"container-premium d-flex align-center justify-space-between mx-auto"},We={class:"d-flex align-center gap-4"},He={class:"text-caption text-grey d-flex align-center gap-1"},Je={class:"text-h6 font-weight-black mb-0"},Xe={class:"d-flex align-center gap-3"},Qe={class:"main-content-wrapper pa-6 bg-grey-lighten-5 min-h-screen"},Ye={class:"container-premium mx-auto"},Ze={class:"d-flex flex-column gap-6"},el={class:"d-flex align-center gap-3 mb-6"},ll={class:"sticky-sidebar d-flex flex-column gap-6"},al={__name:"ProductForm",props:{modelValue:{type:Object,required:!0},categories:{type:Array,default:()=>[]},brands:{type:Array,default:()=>[]},warehouses:{type:Array,default:()=>[]},availableAttributes:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue","submit","cancel"],setup(g,{emit:h}){const f=g,V=h,t=x({...f.modelValue,images:f.modelValue.images||[],variants:f.modelValue.variants||[],tags:f.modelValue.tags||[],active:f.modelValue.active??!0});H(()=>f.modelValue,o=>{t.value={...o}},{deep:!0}),H(t,o=>{V("update:modelValue",o)},{deep:!0});const n=()=>{V("submit",t.value)};return(o,l)=>(p(),y("div",Ge,[a("div",Ne,[a("div",Ke,[a("div",We,[e(U,{icon:"ri-arrow-right-line",variant:"text",onClick:l[0]||(l[0]=m=>o.$emit("cancel"))}),a("div",null,[a("div",He,[l[10]||(l[10]=a("span",null,"المنتجات",-1)),e(z,{icon:"ri-arrow-left-s-line",size:"14"}),l[11]||(l[11]=a("span",null,"إضافة منتج جديد",-1))]),a("h1",Je,T(t.value.name||"منتج بدون اسم تحليلي"),1)])]),a("div",Xe,[t.value.active?(p(),j(E,{key:0,color:"success",size:"small",variant:"flat",class:"font-weight-bold"},{default:s(()=>l[12]||(l[12]=[A("نشط")])),_:1})):(p(),j(E,{key:1,color:"grey",size:"small",variant:"flat",class:"font-weight-bold"},{default:s(()=>l[13]||(l[13]=[A("مسودة")])),_:1})),e(ie,{vertical:"",class:"mx-2"}),e(U,{variant:"text",color:"grey-darken-1",class:"font-weight-bold",onClick:l[1]||(l[1]=m=>o.$emit("cancel"))},{default:s(()=>l[14]||(l[14]=[A("تجاهل")])),_:1}),e(U,{color:"primary",size:"large",rounded:"xl",class:"px-8 font-weight-black elevation-4",loading:g.loading,"prepend-icon":"ri-shield-check-line",onClick:n},{default:s(()=>l[15]||(l[15]=[A(" حفظ المنتج النهائي ")])),_:1},8,["loading"])])])]),a("div",Qe,[a("div",Ye,[e(P,null,{default:s(()=>[e(c,{cols:"12",lg:"8"},{default:s(()=>[a("div",Ze,[e(Ve,{modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=m=>t.value=m)},null,8,["modelValue"]),e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[a("div",el,[e(S,{color:"secondary-lighten-5",rounded:"lg"},{default:s(()=>[e(z,{icon:"ri-image-2-line",color:"secondary"})]),_:1}),l[16]||(l[16]=a("h3",{class:"text-subtitle-1 font-weight-black"},"معرض الصور",-1))]),e(_e,{modelValue:t.value.images,"onUpdate:modelValue":l[3]||(l[3]=m=>t.value.images=m)},null,8,["modelValue"])]),_:1}),e(Ce,{modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=m=>t.value=m),warehouses:g.warehouses},null,8,["modelValue","warehouses"]),e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white mb-6"},{default:s(()=>[e(Te,{modelValue:t.value.variants,"onUpdate:modelValue":l[5]||(l[5]=m=>t.value.variants=m),"available-attributes":g.availableAttributes},null,8,["modelValue","available-attributes"])]),_:1})])]),_:1}),e(c,{cols:"12",lg:"4"},{default:s(()=>[a("div",ll,[e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[17]||(l[17]=a("h3",{class:"text-subtitle-1 font-weight-black mb-6"},"التصنيف والبراند",-1)),e(P,{dense:""},{default:s(()=>[e(c,{cols:"12"},{default:s(()=>[e(G,{modelValue:t.value.category_id,"onUpdate:modelValue":l[6]||(l[6]=m=>t.value.category_id=m),items:g.categories,"item-title":"name","item-value":"id",label:"الفئة الأساسية",variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[e(G,{modelValue:t.value.brand_id,"onUpdate:modelValue":l[7]||(l[7]=m=>t.value.brand_id=m),items:g.brands,"item-title":"name","item-value":"id",label:"العلامة التجارية",variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[18]||(l[18]=a("h3",{class:"text-subtitle-1 font-weight-black mb-1"},"الكلمات الدلالية",-1)),l[19]||(l[19]=a("p",{class:"text-caption text-grey mb-4"},"تساعد على تسريع البحث داخل النظام",-1)),e(X,{modelValue:t.value.tags,"onUpdate:modelValue":l[8]||(l[8]=m=>t.value.tags=m),multiple:"",chips:"","closable-chips":"",variant:"solo",flat:"","bg-color":"grey-lighten-4",placeholder:"أضف تاجات...",class:"premium-input-field"},null,8,["modelValue"])]),_:1}),e(_,{variant:"flat",class:"pa-6 rounded-xl border bg-white"},{default:s(()=>[l[20]||(l[20]=a("h3",{class:"text-subtitle-1 font-weight-black mb-1"},"ملاحظات داخلية",-1)),l[21]||(l[21]=a("p",{class:"text-caption text-grey mb-4"},"ملاحظات لا يراها العميل",-1)),e(J,{modelValue:t.value.internal_note,"onUpdate:modelValue":l[9]||(l[9]=m=>t.value.internal_note=m),variant:"solo",flat:"","bg-color":"grey-lighten-4",class:"premium-input-field",rows:"3"},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})])])]))}},tl=B(al,[["__scopeId","data-v-f7d34fce"]]),sl={class:"product-create-container"},ol={__name:"ProductCreate",setup(g){const h=ne(),f=ue(),{getProduct:V,createProduct:t,updateProduct:n}=me(),o=q("/api/categories"),l=q("/api/brands"),m=q("/api/warehouses"),L=q("/api/attributes"),D=x(!1),b=x({}),i=x([]),r=x([]),d=x([]),v=x([]),u=x({name:"",sku:"",barcode:"",category_id:null,brand_id:null,desc:"",desc_long:"",retail_price:0,wholesale_price:0,tax:0,warehouse_id:null,min_quantity:1,weight:0,active:!0,featured:!1,returnable:!0,images:[],variants:[],tags:[],internal_note:""}),C=W(()=>!!f.params.id),Q=async()=>{try{const[$,w,M,F]=await Promise.all([o.get({per_page:100},{showLoading:!1}),l.get({per_page:100},{showLoading:!1}),m.get({per_page:100},{showLoading:!1}),L.get({per_page:100},{showLoading:!1})]);i.value=$.data||[],r.value=w.data||[],d.value=M.data||[],v.value=F.data||[]}catch($){console.error("Failed to load initial data:",$)}},Y=async()=>{if(C.value)try{const w=(await V(f.params.id)).data;u.value={...w,images:w.images||[],variants:w.variants||[],tags:w.tags||[]}}catch($){console.error("Error loading product:",$),h.push("/products")}},Z=async $=>{var w,M;D.value=!0,b.value={};try{C.value?await n(f.params.id,$):await t($),h.push("/products")}catch(F){(M=(w=F.response)==null?void 0:w.data)!=null&&M.errors&&(b.value=F.response.data.errors)}finally{D.value=!1}},ee=()=>{h.push("/products")};return de(async()=>{await Q(),C.value&&await Y()}),($,w)=>(p(),y("div",sl,[e(tl,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=M=>u.value=M),categories:i.value,brands:r.value,warehouses:d.value,"available-attributes":v.value,loading:D.value,errors:b.value,"is-edit":C.value,onSubmit:Z,onCancel:ee},null,8,["modelValue","categories","brands","warehouses","available-attributes","loading","errors","is-edit"])]))}},nl=B(ol,[["__scopeId","data-v-d566d770"]]);export{nl as default};
