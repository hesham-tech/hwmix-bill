import{r as m,c as f,b as t,d as l,w as a,o as r,B as z,x as _,C as E,v as i,F as N,j as I,E as S,u as b,D as v,n as c,p as j,i as F}from"./index-B0c0aplS.js";import{u as L}from"./useApi-C9JqAxpT.js";import{A as T}from"./AppDataTable-DRQWa6GE.js";import{A as U}from"./AppDialog-yMQfGMN-.js";import{f as w}from"./formatters-CKQiR5Fb.js";import"./usePermissions-D1W15K8H.js";const $={class:"product-variant-list-page"},K={class:"px-6 pb-6"},M={class:"d-flex align-center gap-3"},P={class:"font-weight-bold"},R={class:"text-caption text-grey"},G={class:"d-flex flex-wrap gap-1"},H={key:0,class:"text-caption text-grey"},J={class:"font-weight-bold"},O={class:"text-caption text-grey"},ae={__name:"ProductVariantList",setup(Q){const g=j(),k=L("/api/product-variants"),n=m(!1),u=m(!1),d=m(null),V=[{title:"المنتج / SKU",key:"product_name"},{title:"المواصفات",key:"attributes",sortable:!1},{title:"الأسعار",key:"retail_price"},{title:"الكمية",key:"quantity"},{title:"الحالة",key:"status"},{title:"الإجراءات",key:"actions",sortable:!1,align:"end"}],D=(s,o)=>s<=0?"error":s<=(o||5)?"warning":"success",C=s=>{g.push(`/products/${s.product_id}`)},A=s=>{g.push(`/products/${s.product_id}/edit`)},B=s=>{d.value=s,n.value=!0},q=async()=>{if(d.value){u.value=!0;try{await k.remove(d.value.id,{successMessage:"تم حذف الشكل بنجاح"}),n.value=!1,window.location.reload()}finally{u.value=!1}}};return(s,o)=>(r(),f("div",$,[o[2]||(o[2]=t("div",{class:"mb-6 px-6 pt-6 d-flex align-center justify-space-between"},[t("div",null,[t("h1",{class:"text-h4 font-weight-bold"},"أشكال المنتجات"),t("p",{class:"text-body-1 text-grey"},"عرض وإدارة كافة تشكيلات المنتجات (الألوان، المقاسات، الخ)")])],-1)),t("div",K,[l(T,{title:"قائمة الأشكال",icon:"ri-stack-line",headers:V,"api-url":"/api/product-variants","permission-module":"product_variants","show-actions":"","can-edit":!0,"can-delete":!0,"can-view":!0,onView:C,onEdit:A,onDelete:B},{"item.product_name":a(({item:e})=>[t("div",M,[l(z,{size:"40",rounded:"lg",color:"primary-lighten-5"},{default:a(()=>[e.image?(r(),_(E,{key:0,src:e.image,cover:""},null,8,["src"])):(r(),_(F,{key:1,icon:"ri-image-line",color:"primary"}))]),_:2},1024),t("div",null,[t("div",P,i(e.product_name),1),t("div",R,i(e.sku),1)])])]),"item.attributes":a(({item:e})=>{var y;return[t("div",G,[(r(!0),f(N,null,I(e.attributes,p=>(r(),_(v,{key:p.id,size:"x-small",variant:"tonal",color:"secondary"},{default:a(()=>{var h,x;return[c(i((h=p.attribute)==null?void 0:h.name)+": "+i((x=p.attribute_value)==null?void 0:x.name),1)]}),_:2},1024))),128)),(y=e.attributes)!=null&&y.length?S("",!0):(r(),f("span",H,"أساسي"))])]}),"item.retail_price":a(({item:e})=>[t("div",J,i(b(w)(e.retail_price)),1),t("div",O,"الجملة: "+i(b(w)(e.wholesale_price)),1)]),"item.quantity":a(({item:e})=>[l(v,{color:D(e.quantity,e.min_quantity),size:"small",class:"font-weight-bold"},{default:a(()=>[c(i(e.quantity??0),1)]),_:2},1032,["color"])]),"item.status":a(({item:e})=>[l(v,{color:e.status==="active"?"success":"error",size:"x-small",variant:"flat"},{default:a(()=>[c(i(e.status==="active"?"نشط":"متوقف"),1)]),_:2},1032,["color"])]),_:1})]),l(U,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),title:"تأكيد الحذف",icon:"ri-delete-bin-line","confirm-color":"error","confirm-text":"حذف",loading:u.value,onConfirm:q},{default:a(()=>o[1]||(o[1]=[c(" هل أنت متأكد من حذف هذا الشكل؟ لا يمكن التراجع عن هذه العملية إذا كان هناك مخزون مرتبطة به. ")])),_:1},8,["modelValue","loading"])]))}};export{ae as default};
