import{u as S}from"./usePermissions-BOh6stgy.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{y as c,o as n,v as o,w as s,a5 as M,a as r,h as B,D as d,t as g,at as p,am as A,b as v,as as T,i as D,u as h,G as b,a8 as N,m as U,aQ as z,f as I,aj as L,L as O}from"./index-DPR0tjT6.js";const j={class:"d-flex align-center gap-2"},E={class:"d-flex gap-2"},W={class:"d-flex gap-1"},q={class:"text-center py-8"},F={class:"text-h6 text-grey mt-4"},G={class:"text-body-2 text-grey-darken-1"},Q={__name:"AppDataTable",props:{headers:{type:Array,required:!0},items:{type:Array,default:()=>[]},totalItems:{type:Number,default:0},loading:{type:Boolean,default:!1},page:{type:Number,default:1},itemsPerPage:{type:Number,default:10},sortBy:{type:Array,default:()=>[]},searchable:{type:Boolean,default:!0},search:{type:String,default:""},title:{type:String,default:""},icon:{type:String,default:""},permissionModule:{type:String,default:""},showActions:{type:Boolean,default:!0},canView:{type:Boolean,default:!0},canEdit:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0},emptyText:{type:String,default:"لا توجد بيانات"},emptySubtext:{type:String,default:"ابدأ بإضافة عنصر جديد"},hidePagination:{type:Boolean,default:!1},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"الكل"}]}},emits:["update:page","update:itemsPerPage","update:sortBy","update:search","update:options","view","edit","delete"],setup(e,{emit:V}){const{can:y}=S(),m=e,u=V,P=c({get:()=>m.page,set:t=>u("update:page",t)}),k=c({get:()=>m.itemsPerPage,set:t=>u("update:itemsPerPage",t)}),x=c({get:()=>m.sortBy,set:t=>u("update:sortBy",t)}),f=c({get:()=>m.search,set:t=>u("update:search",t)}),$=t=>{u("update:options",t)};return(t,l)=>(n(),o(I,null,{default:s(()=>[e.title?(n(),o(M,{key:0,class:"d-flex align-center justify-space-between"},{default:s(()=>[r("div",j,[e.icon?(n(),o(B,{key:0,icon:e.icon},null,8,["icon"])):d("",!0),r("span",null,g(e.title),1)]),r("div",E,[p(t.$slots,"actions",{},void 0,!0),e.searchable?(n(),o(A,{key:0,modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value=a),density:"compact",placeholder:"بحث...","prepend-inner-icon":"ri-search-line",variant:"outlined","hide-details":"",clearable:"",style:{"max-width":"300px"}},null,8,["modelValue"])):d("",!0)])]),_:3})):d("",!0),v(z,{"items-per-page":k.value,"onUpdate:itemsPerPage":l[1]||(l[1]=a=>k.value=a),page:P.value,"onUpdate:page":l[2]||(l[2]=a=>P.value=a),"sort-by":x.value,"onUpdate:sortBy":l[3]||(l[3]=a=>x.value=a),headers:e.headers,items:e.items,"items-length":e.totalItems,loading:e.loading,search:f.value,class:"elevation-0",density:"comfortable","items-per-page-options":e.itemsPerPageOptions,"no-data-text":e.emptyText,"hide-default-footer":e.hidePagination,"onUpdate:options":$,"onClick:row":l[4]||(l[4]=(a,{item:i})=>t.$emit("click:row",i))},T({loading:s(()=>[v(N,{type:"table-row@5"})]),"no-data":s(()=>[r("div",q,[v(B,{size:"64",color:"grey-lighten-1"},{default:s(()=>l[5]||(l[5]=[U(" ri-inbox-line ")])),_:1}),r("p",F,g(e.emptyText),1),r("p",G,g(e.emptySubtext),1),p(t.$slots,"empty-action",{},void 0,!0)])]),_:2},[D(t.$slots,(a,i)=>({name:i,fn:s(w=>[i.startsWith("item.")||i.startsWith("header.")||["no-data","loading","body","footer","top","bottom"].includes(i)?p(t.$slots,i,L(O({key:0},w||{})),void 0,!0):d("",!0)])})),e.showActions?{name:"item.actions",fn:s(({item:a})=>[r("div",W,[e.canView&&(!e.permissionModule||h(y)(`${e.permissionModule}.view_all`,{resource:a}))?(n(),o(b,{key:0,icon:"ri-eye-line",size:"small",variant:"text",color:"info",onClick:i=>t.$emit("view",a)},null,8,["onClick"])):d("",!0),e.canEdit&&(!e.permissionModule||h(y)(`${e.permissionModule}.update_all`,{resource:a}))?(n(),o(b,{key:1,icon:"ri-edit-line",size:"small",variant:"text",color:"primary",onClick:i=>t.$emit("edit",a)},null,8,["onClick"])):d("",!0),e.canDelete&&(!e.permissionModule||h(y)(`${e.permissionModule}.delete_all`,{resource:a}))?(n(),o(b,{key:2,icon:"ri-delete-bin-line",size:"small",variant:"text",color:"error",onClick:i=>t.$emit("delete",a)},null,8,["onClick"])):d("",!0),p(t.$slots,"extra-actions",{item:a},void 0,!0)])]),key:"0"}:void 0]),1032,["items-per-page","page","sort-by","headers","items","items-length","loading","search","items-per-page-options","no-data-text","hide-default-footer"])]),_:3}))}},R=C(Q,[["__scopeId","data-v-2f665120"]]);export{R as A};
