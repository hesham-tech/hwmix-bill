import{_ as k,R as C,r as t,z as D,P as w,ak as B,k as R,j as a,U as v,f as N,o as V,d as e,a5 as d,u as P,M as S,a1 as T,a2 as j,a4 as g,a6 as n,c as q,D as E,q as F,a9 as M,b as z,g as O,Z,$ as _}from"./index-Tc2OuKZg.js";import{I as $}from"./ImagePickerDialog--SKaxBfx.js";const A={key:0},G={__name:"edit",setup(H){C();const m=N(),I=O(),c=t(!1),b=t(m.params.id),x=D(),f=t(null),r=t([]),i=t(null),p=t(!1),o=t({});w(()=>{m.params.id&&(c.value=!0,B("company",b.value,{basic:!1}).then(s=>{o.value=s.data,s.data.logo&&(i.value=s.data.logo)}).finally(s=>{c.value=!1}))});const U=s=>{s?(f.value=s,r.value=s.id,i.value=s.url):(f.value=null,r.value=null)};function y(){const s={...o.value};r.value&&(s.images_ids=[r.value]),delete s.logo,Z("company",s,m.params.id).then(l=>{x.fetchUser(),_.success("تم حفظ الشركة بنجاح"),I.go(-1)}).catch(l=>{console.error("Error saving company:",l),_.error("حدث خطأ أثناء حفظ الشركة")})}return(s,l)=>(V(),R(v,null,{default:a(()=>[e(g,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(v,{elevation:"0",loading:c.value,title:P(m).params.id?"تعديل الشركة":"اضافة شركة",class:"ma-4"},{default:a(()=>[e(S),e(T,null,{default:a(()=>[e(j,{class:"mt-6"},{default:a(()=>[e(g,null,{default:a(()=>[e(d,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(n,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=u=>o.value.name=u),label:" اسم الشركة "},null,8,["modelValue"])]),_:1}),e(d,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(n,{modelValue:o.value.field,"onUpdate:modelValue":l[1]||(l[1]=u=>o.value.field=u),label:" التخصص  "},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(n,{required:"",modelValue:o.value.email,"onUpdate:modelValue":l[2]||(l[2]=u=>o.value.email=u),label:"الايميل",placeholder:"johndoe@gmail.com",type:"email"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(n,{modelValue:o.value.phone,"onUpdate:modelValue":l[3]||(l[3]=u=>o.value.phone=u),label:" رقم الهاتف ",placeholder:"0123456789"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(n,{modelValue:o.value.description,"onUpdate:modelValue":l[4]||(l[4]=u=>o.value.description=u),label:" وصف  ",placeholder:"نبذه عن الشركة ومجالها"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(n,{modelValue:o.value.address,"onUpdate:modelValue":l[5]||(l[5]=u=>o.value.address=u),label:" العنوان  ",placeholder:"عنوان الشركة"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",sm:"6",md:"4"},{default:a(()=>[i.value?(V(),q("div",A,[e(E,{src:i.value,class:"mb-2","aspect-ratio":"1",cover:""},null,8,["src"])])):F("",!0),e(d,{cols:"12"},{default:a(()=>[e($,{modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=u=>p.value=u),onClose:U,"button-text":"تغيير الشعار"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(M,{onClick:y},{default:a(()=>l[7]||(l[7]=[z(" حفظ ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading","title"])]),_:1})]),_:1})]),_:1}))}},L=k(G,[["__scopeId","data-v-aaad3788"]]);export{L as default};
