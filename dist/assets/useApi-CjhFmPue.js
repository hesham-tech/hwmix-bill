import{r as p,aK as h,p as f}from"./index-CuR9-sbN.js";function k(w){const v=w.startsWith("/api/")?w.substring(5):w.startsWith("api/")?w.substring(4):w,u=p(!1),r=p(null);return{loading:u,error:r,get:async(i={},o={})=>{var t,n;const{showLoading:a=!0,showError:l=!0}=o;a&&(u.value=!0),r.value=null;try{return(await h.get(v,{params:i})).data}catch(s){throw r.value=((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||s.message||"حدث خطأ في تحميل البيانات",l&&f.error(r.value),s}finally{a&&(u.value=!1)}},getById:async(i,o={})=>{var t,n;const{showLoading:a=!0,showError:l=!0}=o;a&&(u.value=!0),r.value=null;try{return(await h.get(`${v}/${i}`)).data}catch(s){throw r.value=((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||s.message||"حدث خطأ في تحميل البيانات",l&&f.error(r.value),s}finally{a&&(u.value=!1)}},create:async(i,o={})=>{var s,c;const{showLoading:a=!0,showSuccess:l=!0,showError:t=!0,successMessage:n="تمت الإضافة بنجاح"}=o;a&&(u.value=!0),r.value=null;try{const e=await h.post(v,i);return l&&f.success(n),e.data}catch(e){throw r.value=((c=(s=e.response)==null?void 0:s.data)==null?void 0:c.message)||e.message||"حدث خطأ في الحفظ",t&&f.error(r.value),e}finally{a&&(u.value=!1)}},update:async(i,o,a={})=>{var c,e;const{showLoading:l=!0,showSuccess:t=!0,showError:n=!0,successMessage:s="تم التحديث بنجاح"}=a;l&&(u.value=!0),r.value=null;try{const g=await h.put(`${v}/${i}`,o);return t&&f.success(s),g.data}catch(g){throw r.value=((e=(c=g.response)==null?void 0:c.data)==null?void 0:e.message)||g.message||"حدث خطأ في التحديث",n&&f.error(r.value),g}finally{l&&(u.value=!1)}},remove:async(i,o={})=>{var s,c;const{showLoading:a=!0,showSuccess:l=!0,showError:t=!0,successMessage:n="تم الحذف بنجاح"}=o;a&&(u.value=!0),r.value=null;try{const e=await h.delete(`${v}/${i}`);return l&&f.success(n),e.data}catch(e){throw r.value=((c=(s=e.response)==null?void 0:s.data)==null?void 0:c.message)||e.message||"حدث خطأ في الحذف",t&&f.error(r.value),e}finally{a&&(u.value=!1)}},bulkDelete:async(i,o={})=>{var s,c;const{showLoading:a=!0,showSuccess:l=!0,showError:t=!0,successMessage:n="تم الحذف بنجاح"}=o;a&&(u.value=!0),r.value=null;try{const e=await h.post(`${v}/bulk-delete`,{ids:i});return l&&f.success(n),e.data}catch(e){throw r.value=((c=(s=e.response)==null?void 0:s.data)==null?void 0:c.message)||e.message||"حدث خطأ في الحذف",t&&f.error(r.value),e}finally{a&&(u.value=!1)}},request:async(i,o,a=null,l={})=>{var s,c;const{showLoading:t=!0,showError:n=!0}=l;t&&(u.value=!0),r.value=null;try{const e=o.startsWith("/")?`${v}${o}`:`${v}/${o}`;return(await h({method:i,url:e,data:a})).data}catch(e){throw r.value=((c=(s=e.response)==null?void 0:s.data)==null?void 0:c.message)||e.message||"حدث خطأ",n&&f.error(r.value),e}finally{t&&(u.value=!1)}}}}export{k as u};
