import{u as k}from"./useApi-CTBDEoea.js";import{A as D}from"./AppDataTable-CV9gFKLg.js";import{r as n,K as C,c as P,a,b as l,w as o,o as z,C as E,h as y,m as T,t as s,z as V}from"./index-DPR0tjT6.js";import"./usePermissions-BOh6stgy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"transactions-page"},L={class:"px-6 pb-6"},N={class:"d-flex align-center"},S={class:"font-weight-medium text-secondary"},A={class:"d-flex flex-column"},B={class:"font-weight-medium"},I={class:"text-caption text-grey"},U={class:"text-body-2 text-wrap",style:{"max-width":"300px"}},H={__name:"TransactionList",setup(F){const h=k("/api/transactions"),d=n([]),c=n(!1),u=n(0),i=n(1),p=n(10),f=[{title:"النوع",key:"type"},{title:"الخزينة",key:"cash_box"},{title:"المبلغ",key:"amount",align:"end"},{title:"التاريخ",key:"date"},{title:"الوصف",key:"description"}],x=()=>"ج.م",_=t=>t?new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",currencyDisplay:"symbol"}).format(t):`0.00 ${x()}`,v=t=>t?new Date(t).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"-",w=t=>t?new Date(t).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}):"",m=async()=>{c.value=!0;try{const t=await h.get({page:i.value,per_page:p.value},{showLoading:!1});d.value=t.data||[],u.value=t.total||0}finally{c.value=!1}},b=t=>{p.value=t,i.value=1,m()};return C(m),(t,r)=>(z(),P("div",G,[r[1]||(r[1]=a("div",{class:"mb-6 px-6 pt-6"},[a("h1",{class:"text-h4 font-weight-bold"},"حركات الخزينة"),a("p",{class:"text-body-1 text-grey"},"سجل وتدقيق جميع المعاملات المالية الصادرة والواردة")],-1)),a("div",L,[l(D,{headers:f,items:d.value,loading:c.value,"items-length":u.value,"items-per-page":p.value,page:i.value,title:"المعاملات المالية الأخيرة",icon:"ri-exchange-line","onUpdate:page":r[0]||(r[0]=e=>{i.value=e,m()}),"onUpdate:itemsPerPage":b},{"item.type":o(({item:e})=>[l(E,{color:e.type==="income"?"success":"error",size:"small",variant:"flat",class:"font-weight-bold px-3"},{default:o(()=>[l(y,{icon:e.type==="income"?"ri-arrow-left-down-line":"ri-arrow-right-up-line",size:"14",class:"me-1"},null,8,["icon"]),T(" "+s(e.type==="income"?"إيداع نقدية":"سحب نقدية"),1)]),_:2},1032,["color"])]),"item.cash_box":o(({item:e})=>{var g;return[a("div",N,[l(y,{icon:"ri-safe-2-line",size:"small",color:"secondary",class:"me-2"}),a("span",S,s(((g=e.cash_box)==null?void 0:g.name)||"خزينة غير محددة"),1)])]}),"item.amount":o(({item:e})=>[a("div",{class:V(["text-end font-weight-black text-h6",e.type==="income"?"text-success":"text-error"])},s(e.type==="income"?"+":"-")+" "+s(_(e.amount)),3)]),"item.date":o(({item:e})=>[a("div",A,[a("span",B,s(v(e.transaction_date)),1),a("span",I,s(w(e.transaction_date)),1)])]),"item.description":o(({item:e})=>[a("span",U,s(e.description||"لا يوجد وصف"),1)]),_:1},8,["items","loading","items-length","items-per-page","page"])])]))}};export{H as default};
