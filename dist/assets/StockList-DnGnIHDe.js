import{u as z}from"./useApi-CTBDEoea.js";import{A as V}from"./AppDataTable-CV9gFKLg.js";import{r as n,K as B,c as h,a as o,b as i,w as a,o as _,t as l,v as A,m as d,C as g,h as v}from"./index-DPR0tjT6.js";import"./usePermissions-BOh6stgy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"stock-page"},I={class:"px-6 pb-6"},N={class:"d-flex flex-column"},U={class:"font-weight-bold text-body-1"},K={class:"text-caption text-grey"},L={key:1,class:"text-grey-lighten-1 text-caption"},T={class:"d-flex align-center"},E={class:"font-weight-medium text-info"},M={class:"font-weight-medium"},Q={__name:"StockList",setup(j){const x=z("/api/products"),m=n([]),c=n(!1),k=n(0),r=n(1),u=n(10),y=[{title:"المنتج",key:"product"},{title:"الفئة",key:"category"},{title:"المخزن",key:"warehouse"},{title:"الكمية",key:"stock_quantity",align:"center"},{title:"الحد الأدنى",key:"min_stock_level",align:"center"},{title:"الحالة",key:"status"}],w=(t,s)=>!t||t===0?"error":t<(s||10)?"warning":"success",b=(t,s)=>!t||t===0?"ri-close-circle-line":t<(s||10)?"ri-error-warning-line":"ri-checkbox-circle-line",S=(t,s)=>!t||t===0?"نفذ المخزون":t<(s||10)?"مخزون منخفض":"متوفر",C=(t,s)=>!t||t===0?"error":t<(s||10)?"warning":"success",p=async()=>{c.value=!0;try{const t=await x.get({page:r.value,per_page:u.value,track_stock:1},{showLoading:!1});m.value=t.data||[],k.value=t.total||0}finally{c.value=!1}},P=t=>{u.value=t,r.value=1,p()};return B(p),(t,s)=>(_(),h("div",D,[s[1]||(s[1]=o("div",{class:"mb-6 px-6 pt-6"},[o("h1",{class:"text-h4 font-weight-bold"},"المخزون"),o("p",{class:"text-body-1 text-grey"},"مراقبة مستويات المخزون وحالات التوفر في جميع المستودعات")],-1)),o("div",I,[i(V,{headers:y,items:m.value,loading:c.value,"items-length":k.value,"items-per-page":u.value,page:r.value,title:"حالة المخزون الحالي",icon:"ri-inbox-line","onUpdate:page":s[0]||(s[0]=e=>{r.value=e,p()}),"onUpdate:itemsPerPage":P},{"item.product":a(({item:e})=>[o("div",N,[o("span",U,l(e.name),1),o("span",K,l(e.sku||"بدون SKU"),1)])]),"item.category":a(({item:e})=>[e.category?(_(),A(g,{key:0,size:"small",variant:"flat",color:"primary-lighten-5",class:"text-primary font-weight-bold"},{default:a(()=>[d(l(e.category.name),1)]),_:2},1024)):(_(),h("span",L,"غير مصنف"))]),"item.warehouse":a(({item:e})=>{var f;return[o("div",T,[i(v,{icon:"ri-building-line",size:"small",color:"info",class:"me-2"}),o("span",E,l(((f=e.warehouse)==null?void 0:f.name)||"غير محدد"),1)])]}),"item.stock_quantity":a(({item:e})=>[i(g,{color:w(e.stock_quantity,e.min_stock_level),size:"small",variant:"flat",class:"font-weight-bold px-3"},{default:a(()=>[i(v,{icon:b(e.stock_quantity,e.min_stock_level),size:"14",class:"me-1"},null,8,["icon"]),d(" "+l(e.stock_quantity||0)+" وحدة ",1)]),_:2},1032,["color"])]),"item.min_stock_level":a(({item:e})=>[o("span",M,l(e.min_stock_level||"0"),1)]),"item.status":a(({item:e})=>[i(g,{color:C(e.stock_quantity,e.min_stock_level),size:"small",variant:"tonal",class:"font-weight-black"},{default:a(()=>[d(l(S(e.stock_quantity,e.min_stock_level)),1)]),_:2},1032,["color"])]),_:1},8,["items","loading","items-length","items-per-page","page"])])]))}};export{Q as default};
