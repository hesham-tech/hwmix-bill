import{_,R as F,r,z as C,P as k,ak as w,k as I,j as a,U as v,f as R,o as V,d as e,a5 as u,u as x,M as D,a1 as B,a2 as P,a4 as f,a6 as m,c as N,D as T,q as j,ay as q,a9 as z,p as M,b as S,g as A,Z as E}from"./index-Tc2OuKZg.js";const L={key:0},O={__name:"edit",setup(W){F();const i=R(),c=A(),p=r(!1),g=r(i.params.id),y=C(),t=r(null),n=r(null),b=()=>{if(console.log(t.value),t.value&&t.value.type.startsWith("image/")){const s=new FileReader;s.onload=l=>{n.value=l.target.result},s.readAsDataURL(t.value)}else n.value=null},o=r({});k(()=>{i.params.id&&(p.value=!0,w("company",g.value).then(s=>{o.value=s,console.log(" company.value.logo",s.logo),n.value=s.logo,console.log("imagePreview",n)}).finally(s=>{p.value=!1}))});function U(){t.value&&(o.value.logo=t.value),E("company",o.value,i.params.id).then(s=>{y.fetchUser(),c.go(-1)})}return(s,l)=>(V(),I(v,null,{default:a(()=>[e(f,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(v,{elevation:"0",loading:p.value,title:x(i).params.id?"تعديل الشركة":"اضافة شركة",class:"ma-4"},{default:a(()=>[e(D),e(B,null,{default:a(()=>[e(P,{class:"mt-6",ref:"companyForm",modelValue:s.companyFormValid,"onUpdate:modelValue":l[7]||(l[7]=d=>s.companyFormValid=d)},{default:a(()=>[e(f,null,{default:a(()=>[e(u,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(m,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=d=>o.value.name=d),label:" اسم الشركة "},null,8,["modelValue"])]),_:1}),e(u,{sm:"6",md:"4",cols:"12"},{default:a(()=>[e(m,{modelValue:o.value.field,"onUpdate:modelValue":l[1]||(l[1]=d=>o.value.field=d),label:" التخصص  "},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(m,{required:"",modelValue:o.value.email,"onUpdate:modelValue":l[2]||(l[2]=d=>o.value.email=d),label:"الايميل",placeholder:"johndoe@gmail.com",type:"email"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(m,{modelValue:o.value.phone,"onUpdate:modelValue":l[3]||(l[3]=d=>o.value.phone=d),label:" رقم الهاتف ",placeholder:"0123456789"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(m,{modelValue:o.value.description,"onUpdate:modelValue":l[4]||(l[4]=d=>o.value.description=d),label:" وصف  ",placeholder:"نبذه عن الشركة ومجالها"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(m,{modelValue:o.value.address,"onUpdate:modelValue":l[5]||(l[5]=d=>o.value.address=d),label:" العنوان  ",placeholder:"عنوان الشركة"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",sm:"6",md:"4"},{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[n.value?(V(),N("div",L,[e(T,{src:n.value,class:"mb-2","aspect-ratio":"1",cover:""},null,8,["src"])])):j("",!0)]),_:1}),e(u,{cols:"12"},{default:a(()=>[e(q,{modelValue:t.value,"onUpdate:modelValue":l[6]||(l[6]=d=>t.value=d),label:"اختر شعار","prepend-icon":"ri-image-add-fill",accept:"image/*",chips:"",placeholder:"اختر شعار للشركة",onChange:b},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(z,{disabled:!s.companyFormValid,class:M({"forbidden-cursor":!s.companyFormValid}),onClick:U},{default:a(()=>l[8]||(l[8]=[S(" حفظ ")])),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["loading","title"])]),_:1})]),_:1})]),_:1}))}},G=_(O,[["__scopeId","data-v-064d8260"]]);export{G as default};
