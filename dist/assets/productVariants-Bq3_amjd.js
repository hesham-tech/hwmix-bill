import{_ as B}from"./AttributesDisplay-oEEIS1JR.js";import{_ as E,r,w as P,k as b,j as l,U as C,o as f,d as t,a6 as z,Y as D,a9 as g,b as n,t as k,q as x,ap as w,M as N,V as I,W as j,ai as K,a1 as M,c as h,aq as F,X as H,aj as W,$ as T,ao as X}from"./index-Tc2OuKZg.js";const Y={key:0},G={key:1},J={__name:"productVariants",setup(L){const u=r(""),y=r([]),p=r(!0),V=r(0),o=r([]),d=r(!1),i=r(null),U=[{title:"اسم المنتج",key:"product_name"},{title:"SKU",key:"sku"},{title:"الباركود",key:"barcode"},{title:"الكمية",key:"quantity"},{title:" كمية التحزير ",key:"min_quantity"},{title:"سعر الشراء",key:"cost"},{title:"سعر الجملة",key:"wholesale_price"},{title:"سعر القطاعي",key:"retail_price"},{title:"الخصم",key:"discount"},{title:"الخصائص",key:"attributes"},{title:"الإجراء",key:"actions",sortable:!1}];async function v({page:a,itemsPerPage:e,sortBy:c}){p.value=!0;try{const s={page:a,per_page:e,search:u.value,...c.length?{sort_by:c[0].key,sort_desc:c[0].order==="desc"}:{}},m=await W("product-variants",s);y.value=m.data,V.value=m.total}catch(s){console.error("Error fetching product variants:",s),T.error("خطأ في جلب المتغيرات.")}finally{p.value=!1}}function A(a){i.value=a,d.value=!0}function S(){i.value=null,d.value=!0}function _(){d.value=!1,i.value=null}async function $(){try{let a=[];if(i.value?a.push(i.value.id):o.value.length>0&&(a={ids:o.value}),a.length===0)return;console.log("Deleting items with IDs:",a),await X("product-variant/delete",a),_(),o.value=[],v({page:1,itemsPerPage:10,sortBy:[]})}catch(a){console.error("Error deleting product variants:",a)}}function q(a){console.log("Edit item:",a),T.info(`جارٍ تعديل المتغير: ${a.sku}`)}return P(u,()=>{v({page:1,itemsPerPage:10,sortBy:[]})}),(a,e)=>{const c=B;return f(),b(C,{flat:""},{default:l(()=>[t(w,{class:"d-flex align-center pe-2"},{default:l(()=>[t(z,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),"prepend-inner-icon":"mdi-magnify",density:"compact",label:"بحث","single-line":"",flat:"","hide-details":"",variant:"solo-filled"},null,8,["modelValue"]),t(D),o.value.length>0?(f(),b(g,{key:0,color:"error",class:"ms-2",onClick:S},{default:l(()=>[n(" حذف المحدد ("+k(o.value.length)+") ",1)]),_:1})):x("",!0)]),_:1}),t(N),t(K,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),headers:U,items:y.value,"items-length":V.value,loading:p.value,search:u.value,"item-value":"id","onUpdate:options":v,"show-select":"",class:"elevation-1"},{"item.attributes":l(({item:s})=>[t(c,{attributes:s.attributes,"font-size":"10px"},null,8,["attributes"])]),"item.actions":l(({item:s})=>[t(I,{size:"small",class:"me-2",onClick:m=>q(s)},{default:l(()=>e[3]||(e[3]=[n(" mdi-pencil ")])),_:2},1032,["onClick"]),t(I,{size:"small",onClick:m=>A(s)},{default:l(()=>e[4]||(e[4]=[n(" mdi-delete ")])),_:2},1032,["onClick"])]),"no-data":l(()=>[t(j,{value:!0,color:"info",icon:"mdi-information"},{default:l(()=>e[5]||(e[5]=[n(" لا توجد بيانات متاحة لعرضها. ")])),_:1})]),_:1},8,["modelValue","items","items-length","loading","search"]),t(H,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),"max-width":"500px",persistent:""},{default:l(()=>[t(C,null,{default:l(()=>[t(w,{class:"headline"},{default:l(()=>e[6]||(e[6]=[n("تأكيد الحذف")])),_:1}),t(M,null,{default:l(()=>[e[7]||(e[7]=n(" هل أنت متأكد أنك تريد حذف ")),i.value?(f(),h("span",Y,"هذا المتغير (SKU: "+k(i.value.sku)+")؟",1)):o.value.length>0?(f(),h("span",G,"المتغيرات المحددة ("+k(o.value.length)+").",1)):x("",!0),e[8]||(e[8]=n(" هذا الإجراء لا يمكن التراجع عنه. "))]),_:1}),t(F,null,{default:l(()=>[t(D),t(g,{color:"blue-darken-1",text:"",onClick:_},{default:l(()=>e[9]||(e[9]=[n("إلغاء")])),_:1}),t(g,{color:"error",text:"",onClick:$},{default:l(()=>e[10]||(e[10]=[n("حذف")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},R=E(J,[["__scopeId","data-v-672ffcb5"]]);export{R as default};
